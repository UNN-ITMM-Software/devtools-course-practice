# Лабораторная работа #3: Разработка приложения

## Цели

  1. Продолжить освоение техники написания модульных тестов с использованием Google Test.
  1. Получить первичные навыки использования инструмента CTest.
  1. В этой лабораторной мы пробуем практиковать навыки командной разработки,
     применяя такую практику как [Коллективное владение][collective-ownership].

## Задачи

  1. Поскольку мы будем практиковать Коллективное владение, первое что нужно
     сделать — это выбрать сторонний модуль для доработки. Вам снова нужно
     выбрать [тему][topics], вписав свое имя. И первая задача — это "освоиться"
     в новом модуле. Необходимо добавить несколько тестов, подчистить код.

  1. Далее необходимо добавить еще одну сборку в CMake проект — консольное
     приложение, позволяющее пользоваться классом.

  1. Центральной частью новой сборки должен быть класс `Application`, который
     инкапсулирует всю работу с пользователем. Он должен принимать те же
     аргументы, что и функция `main`, и возвращать строку, которую нужно
     напечатать в консоль. Класс должен быть покрыт тестами.

  1. Последним шагом следует добавить CTest-тесты для бинарника. Они могут быть
     легковесными, но проверять, классы `Application` и функция `main` корректно
     работают вместе.

## Типичные ошибки

  - TBD

## Детальные инструкции

### Первичная настройка

Получите актуальную версию кода и создайте новую ветку для работы над
лабораторной:

        $ git checkout main
        $ git pull upstream main
        $ git checkout -b korniakov-kirill-lab3

### Выполнение лабораторной

При выполнении лабораторной работы как обычно рекомендуется пользоваться
проектом-примером, находящимся в директории `complex-number`.

  1. Создайте директорию `application` в верхней директории своего проекта.
     Создайте cpp-файл с реализацией простейшего "Hello world" приложения на
     С++ и CMake-файл для него.

  1. Добавьте построение нового модуля в корневой своего модуля CMake. После
     этого запустите построение и убедитесь, что появляется новый бинарник и он
     работает (печатает "Hello world").

  1. Затем следует реализовать простейший класс `Application`.
     - Сначала он может быть чисто фиктивным, но необходимо создать заготовки
       всех файлов: заголовочный, файл с реализацией и файл с модульными
       тестами. Создайте все эти файлы, напишите примитивный (можно фиктивный)
       тест.
     - После чего снова соберите и запустите тестирование всего проекта.
       Убедитесь, что все проверки проходят (в том числе соответствие стилю
       кодирования).
     - В этот момент уже полезно послать pull request, чтобы он тестировался
       параллельно с тем, как вы разработываетесь. К этому моменту тестирование
       может занимать порядка 15 минут времени, поэтому полезно вести разработку
       и тестирование в параллели.

  1. Теперь можно считать, что готова вся инфраструктура, поэтому можно заняться
     реализацией полноценного класса Application.
     - __Внимание:__ при этом не нужно строить и запускать консольное
       приложение. Стоит работать с тестами. Рекомендуется делать это вместе с
       итеративно: реализовали простой случай — написали на него тест, другой
       маленький случай — еще один тест.
     - На этой стадии может оказаться, что оригинальный класс не очень удобен
       для использования из консоли. В таком режиме Вам предлагается модифицировать
       класс таким образом, чтобы стало удобнее.

  1. После того как класс `Application` реализован, можно связать его с
     функцией `main` консольной утилиты. Это должно быть тривиально.

  1. Заключительным шагом должно стать создание CTest-тестов. Стоит обратиться к
     проекту-примеру (и документации на [CTest][ctest]), чтобы разобраться как
     именно писать такие тесты. Также, для примера можно ознакомиться с файлом
     `CTestTests.txt` в директории с проектом-примером.
     - __Внимание:__ набор тестов должен быть достаточно представительным,
       должны проверяться все ключевые сценарии использования.

### Ревью кода

Заключительная часть происходит как обычно, нужно прислать пулл-реквест и пройти
ревью сокурсников и преподавателя. На этот раз полезно иметь в качестве
рецензента оригинального автора модуля, который вы разрабатывали.

В случае, когда рецензентом являетесь вы, тщательно проверяйте коды товарищей по
всем аспектам: выполнение требований лабораторной работы, убедитесь что все
тесты запускаются и проходят на Travis, что все классы грамотно спроектированы,
а код хорошо оформлен.

<!-- LINKS -->

[ctest]: http://www.vtk.org/Wiki/CMake/Testing_With_CTest
[collective-ownership]: http://www.extremeprogramming.org/rules/collective.html
[topics]: ./topics.md
